# F1 레이싱 게임 개발 진행 상황

**최종 업데이트**: 2025-12-03
**프로젝트 상태**: 🚧 Phase 2-3 진행 중
**GitHub**: https://github.com/H0GUN3/F1_Game

---

## 📊 전체 진행률

```
Phase 1: 기반 구축         ████████████████████ 100% ✅
Phase 2: 싱글플레이 완성   █████░░░░░░░░░░░░░░░  25% 🚧
Phase 3: 멀티플레이 기반   ██░░░░░░░░░░░░░░░░░░  10% 🚧
Phase 4: 멀티플레이 완성   ░░░░░░░░░░░░░░░░░░░░   0% 📅
```

---

## ✅ 완료된 작업 (Phase 1)

### 1. TextureAtlas 마이그레이션
**완료일**: 2025-12-02
**담당**: 공통 기반 작업

#### 주요 성과
- [x] `game_ui.atlas` 통합 시스템 구축
- [x] HUD 텍스처 캐싱 (속도계, 랩타임, 내구도 등)
- [x] 신호등 시스템 업데이트 (light-on/light-off)
- [x] 메모리 관리 최적화 (AssetManager 기반)

#### 변경된 파일
- `Main.java`: TextureAtlas 사전 로드
- `SkinFactory.java`: Atlas 통합
- `GameScreen.java`: TextureRegion 캐싱 필드 추가

---

### 2. HUD 시스템 완성
**완료일**: 2025-12-02
**담당**: 공통 기반 작업

#### 구현된 HUD 컴포넌트
- [x] **랩타임 HUD**: 베스트/최근/현재 랩타임 표시
- [x] **속도계 HUD**: 속도(km/h) 및 기어 표시
- [x] **내구도 HUD**: 차량 체력 진행 바 + 경고 색상
- [x] **타이어 HUD**: 타이어 마모도 + 컴파운드 아이콘
- [x] **레이스 상태 HUD**: `P1 / LAP / 0 / 3` 형식
- [x] **미니맵 HUD**: 트랙 미니맵 + 플레이어 위치
- [x] **피트스톱 HUD**: 타이밍 바 미니게임
- [x] **신호등 HUD**: 레이스 시작 카운트다운

#### 기술적 개선
- FreeType 한글 폰트 지원 (capitolcity.ttf)
- HUD 카메라 분리 (게임 카메라와 독립)
- 해상도 대응 레이아웃

---

### 3. Tiled 맵 상호작용 시스템
**완료일**: 2025-12-02
**담당**: 공통 기반 작업

#### 구현된 맵 레이어
- [x] **체크포인트 시스템**: 10개 체크포인트 순차 검증
  - 회전된 객체 지원 (rotation=-90 처리)
  - cpindex 속성 기반 순서 확인
- [x] **출발선 및 랩 카운팅**: 랩 완료 감지, 랩타임 기록
- [x] **Grass 영역**: 오프트랙 속도 페널티 (30% 감속)
- [x] **피트스톱 영역**: entry → service → exit 상태 전환

#### 기술적 해결
- **회전 객체 버그 수정**: Tiled 맵의 rotation 속성 처리
  - 문제: checkpoints 6-10이 인식되지 않음
  - 원인: rotation=-90인 객체의 width/height 미변환
  - 해결: width/height 스왑 + X 위치 조정 (GameScreen.java:1835-1857)

---

### 4. UI/UX 개선
**완료일**: 2025-12-03
**담당**: 싱글플레이 팀

#### 싱글플레이 선택 화면
- [x] CARS 섹션 아이콘/텍스트 크기 증가 (32x32, title 스타일)
- [x] 차량 프리뷰 1.5배 확대 (390x210)
- [x] Atlas 기반 좌/우 네비게이션 버튼 (left/right 아이콘)
- [x] MAP 섹션 스타일링 일치

#### LAP HUD
- [x] 플레이어 번호 대문자 표시 (`P1`, `P2`, `P3`, `P4`)

---

## 🚧 진행 중인 작업

### Phase 2: 싱글플레이 완성 (25% 완료)

#### 담당: feature/singleplay-polish 팀
**브랜치**: `feature/singleplay-polish`
**예상 완료**: 2025-12-17

#### 남은 작업
- [ ] 차량 물리 개선
  - [ ] 가속 감각 향상
  - [ ] 브레이크 로직 조정
  - [ ] 드리프트 메커니즘
- [ ] HUD 레이아웃 최적화
  - [ ] 속도계 크기 조정
  - [ ] 내구도/타이어 HUD 위치 변경
- [ ] UI/UX 개선
  - [ ] 메인 메뉴 레이아웃
  - [ ] 일시정지 메뉴 개선

---

### Phase 3: 멀티플레이 기반 (10% 완료)

#### 담당: feature/multiplayer-core 팀
**브랜치**: `feature/multiplayer-core`
**예상 완료**: 2025-12-24

#### 완료된 작업
- [x] 브랜치 구조 설정
- [x] 협업 가이드 문서 작성

#### 진행 중
- [ ] 네트워크 연결 구조
  - [ ] `GameClient.java` 클래스 설계
  - [ ] `NetworkManager.java` 이벤트 처리
  - [ ] TCP 연결 안정화
- [ ] 방 시스템 구현
  - [ ] `RoomManager.java` (서버)
  - [ ] `GameRoom.java` (게임 방 관리)
  - [ ] `MultiplayerPlaceholderScreen.java` UI

#### 다음 작업
- [ ] 플레이어 스폰 동기화
  - [ ] `PlayerJoinPacket` 정의
  - [ ] `SpawnPositionPacket` 정의
  - [ ] 서버에서 플레이어 ID 할당

---

## 📅 향후 계획 (Phase 4)

### 멀티플레이 완성 (예정: 2025-12-24 ~ 2026-01-14)

#### 위치 동기화
- [ ] `PositionUpdatePacket` 구현
- [ ] 보간(Interpolation) 로직
- [ ] 클라이언트 예측(Client Prediction)

#### 체크포인트/랩 동기화
- [ ] `CheckpointPassedPacket`
- [ ] `LapCompletePacket`
- [ ] 서버 권한 검증

#### 레이스 시작 동기화
- [ ] `RaceStartPacket`
- [ ] 신호등 카운트다운 동기화
- [ ] 모든 플레이어 준비 확인

---

## 📁 주요 파일 현황

### Core (클라이언트)

| 파일 | 상태 | 설명 |
|-----|------|------|
| `Main.java` | ✅ 안정 | 게임 진입점, AssetManager |
| `GameScreen.java` | ⚠️ 공유 | 게임플레이 화면 (싱글+멀티) |
| `screens/LoginScreen.java` | ✅ 안정 | 로그인 화면 |
| `screens/MainMenuScreen.java` | ✅ 안정 | 메인 메뉴 |
| `screens/SinglePlayScreen.java` | 🚧 개선 중 | 차량/맵 선택 (싱글플레이 팀) |
| `screens/MultiplayerPlaceholderScreen.java` | 🚧 개발 중 | 룸 목록 (멀티플레이 팀) |
| `ui/SkinFactory.java` | ✅ 안정 | UI 스킨 팩토리 |
| `network/` | 🚧 개발 중 | 네트워크 패키지 (멀티플레이 팀) |

### Server

| 파일 | 상태 | 설명 |
|-----|------|------|
| `GameServer.java` | 🚧 개발 중 | 서버 메인 로직 (멀티플레이 팀) |
| `PacketRegistry.java` | 🚧 개발 중 | 패킷 등록 (멀티플레이 팀) |
| `RoomManager.java` | 📅 예정 | 방 관리 시스템 (멀티플레이 팀) |

### Assets

| 파일 | 상태 | 설명 |
|-----|------|------|
| `atlas/game_ui.atlas` | ✅ 완성 | UI 텍스처 아틀라스 |
| `f1_racing_map.tmx` | ✅ 완성 | 네온 시티 트랙 |
| `japan.tmx` | ✅ 완성 | 일본 서킷 |
| `america.tmx` | ✅ 완성 | 미국 GP |

---

## 🐛 알려진 이슈

### 해결됨 ✅
- ~~LAP HUD 소문자 표시 (p1 → P1)~~ → 2025-12-03 수정
- ~~체크포인트 6-10 인식 안됨~~ → rotation 처리로 해결
- ~~차량 선택 화면 아이콘 크기 작음~~ → 1.5배 확대

### 진행 중 🚧
- 차량 물리 가속 감각 부족 (싱글플레이 팀 작업 중)
- HUD 크기 일부 조정 필요 (싱글플레이 팀 작업 중)

### 예정 📅
- 멀티플레이어 네트워크 지연(Latency) 최적화
- 충돌 동기화 (차량끼리 부딪힐 때)

---

## 📈 Git 통계

### 브랜치 현황
```
main                        ← 프로덕션 (안정)
├── feature/singleplay-polish  ← 싱글플레이 개선 (생성 예정)
└── feature/multiplayer-core   ← 멀티플레이 개발 (현재 작업 중)
```

### 최근 커밋 (main)
```
84d5591 feat: Complete UI improvements and checkpoint fixes
8e7bcd4 Chore: clean unused assets and update MP
0ca88af Chore: sync MP ready flow and assets (cars)
```

### 기여자
- **H0GUN3**: 프로젝트 리드, 기반 구축
- **jinwoong0306**: UI 리소스 기여

---

## 🎯 단기 목표 (1주일)

### 싱글플레이 팀
- [ ] `feature/singleplay-polish` 브랜치 생성
- [ ] 차량 물리 개선 (브레이크 로직)
- [ ] HUD 크기 조정 (속도계, 내구도)
- [ ] 첫 PR 제출

### 멀티플레이 팀
- [ ] `GameClient.java` 클래스 구현
- [ ] 서버 연결 테스트 (로컬)
- [ ] `RoomManager.java` 초안 작성
- [ ] 첫 PR 제출

---

## 📝 팀 간 협업 규칙

### GameScreen.java 공유 가이드

**싱글플레이 팀 수정 가능 영역**:
```java
// 차량 물리
private void updateCarPhysics(float delta) { ... }

// 입력 처리
private void handleInput() { ... }

// HUD 렌더링
private void drawSpeedHud() { ... }
private void drawDurabilityHud() { ... }
private void drawTireHud() { ... }
```

**멀티플레이 팀 수정 가능 영역**:
```java
// 네트워크 동기화
private void sendPositionUpdate() { ... }
private void handleServerPackets() { ... }

// 다른 플레이어 렌더링
private void renderOtherPlayers() { ... }

// 멀티플레이어 플래그 분기
if (isMultiplayer) { ... }
```

### 충돌 방지 규칙
1. **매일 아침 main 브랜치 병합**
   ```bash
   git checkout main && git pull origin main
   git checkout feature/your-branch
   git merge main
   ```

2. **작은 단위로 자주 커밋** (하루 3-5회)

3. **PR 제출 전 main 최신화 확인**

---

## 📞 연락처

- **프로젝트 리드**: H0GUN3
- **GitHub Issues**: https://github.com/H0GUN3/F1_Game/issues
- **Pull Requests**: https://github.com/H0GUN3/F1_Game/pulls

---

## 📚 참고 문서

- [협업 가이드](협업가이드.md) - 팀원 필독!
- [개발 로드맵](PHASES.md) - Phase별 상세 계획
- [libGDX 문서](https://libgdx.com/wiki/)
- [Tiled 문서](https://doc.mapeditor.org/)

---

**다음 업데이트 예정**: 2025-12-10 (주간 진행 상황)
