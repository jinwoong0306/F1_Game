# F1 게임 개발 단계별 계획

> 최종 업데이트: 2025-12-04
> 프로젝트 상태: Phase 4 완료, Phase 5 진행 중

---

## 진행 상황 요약

| Phase | 상태 | 완료율 | 완료일 |
|-------|------|--------|--------|
| Phase 0 | ✅ 완료 | 100% | 2025-12-02 |
| Phase 1 | ✅ 완료 | 100% | 2025-12-02 |
| Phase 2 | ✅ 완료 | 100% | 2025-12-03 |
| Phase 3 | ✅ 완료 | 100% | 2025-12-03 |
| Phase 4 | ✅ 완료 | 100% | 2025-12-04 |
| Phase 5 | 🚧 진행 중 | 40% | - |

---

## Phase 0: 프로젝트 구조 분석 및 계획 수립 ✅

**완료일**: 2025-12-02

- [x] 프로젝트 구조 분석 완료
- [x] 기존 GameScreen.java 코드 검토
- [x] assets/atlas/game_ui.atlas 구조 파악
- [x] 개발 로드맵 수립 (PHASES.md 생성)
- [x] GitHub 저장소 업로드 완료

---

## Phase 1: TextureAtlas 마이그레이션 ✅

**완료일**: 2025-12-02

- [x] `Main.java`에 TextureAtlas 사전 로드
- [x] `SkinFactory.java`에서 atlas 참조 통합
- [x] `GameScreen.java`의 개별 Texture 선언 제거
- [x] TextureAtlas에서 TextureRegion 추출하여 필드에 캐싱
- [x] HUD 렌더링 메서드에서 TextureRegion 사용
- [x] 시작 신호등 시스템 업데이트 (light-on/light-off)

---

## Phase 2: HUD 시스템 완성 ✅

**완료일**: 2025-12-03

### 구현된 HUD 컴포넌트
- [x] **랩타임 HUD**: 베스트/최근/현재 랩타임 표시
- [x] **속도계 HUD**: 속도(km/h) 및 기어 표시, 0.6배 스케일
- [x] **내구도 HUD**: 차량 체력 진행 바 + 경고 색상
- [x] **타이어 HUD**: 타이어 마모도 + 컴파운드 아이콘
- [x] **레이스 상태 HUD**: `P1 / LAP / 0 / 3` 형식
- [x] **미니맵 HUD**: 트랙 미니맵 + 플레이어 위치 + 색상 구분
- [x] **피트스톱 HUD**: 타이밍 바 미니게임, 타이어 선택 UI
- [x] **신호등 HUD**: 레이스 시작 카운트다운

---

## Phase 3: Tiled 맵 상호작용 및 전략 시스템 ✅

**완료일**: 2025-12-03

### 맵 레이어
- [x] 체크포인트 시스템 (10개 체크포인트 순차 검증)
- [x] 출발선 및 랩 카운팅
- [x] Grass 영역 속도 페널티 (30% 감속)
- [x] 피트스톱 영역 (entry → service → exit)
- [x] 회전된 객체 처리 (rotation=-90 버그 수정)

### 전략 시스템
- [x] 타이어 컴파운드 시스템 (Soft/Medium/Hard)
  - Soft: 마모율 90초, 속도 +12%
  - Medium: 마모율 130초, 기본 성능
  - Hard: 마모율 150초, 회전력 -15%
- [x] 차량 내구도 시스템 (충돌 시 손상)
- [x] 내구도 0 이하 시 속도 30% 제한
- [x] 피트스톱 미니게임 (타이밍 바)

---

## Phase 4: 멀티플레이어 ✅

**완료일**: 2025-12-04

### 네트워크 아키텍처
- [x] KryoNet 기반 TCP/UDP 통신
- [x] Server-authoritative 아키텍처
- [x] 패킷 정의 (Packets.java, PacketRegistry.java)
- [x] Keep-alive(8초) 및 Timeout(20초) 설정

### 로비 시스템
- [x] 방 생성/참가/나가기
- [x] 최대 4명 플레이어 지원
- [x] Ready 상태 관리
- [x] 트랙/차량 선택 동기화
- [x] 실시간 채팅

### 레이스 동기화
- [x] 카운트다운 후 시작 (신호등 동기화)
- [x] 실시간 위치 동기화 (UDP, 20Hz)
- [x] 원격 플레이어 보간/외삽 (보간 계수: 20)
- [x] 미니맵 플레이어 색상 구분
- [x] 고스트 플레이어 방지 (연결 타임아웃)

### 결과 처리
- [x] 1등 완주 시 10초 카운트다운
- [x] 최종 순위 계산
- [x] 결과 화면 (순위, 시간, 베스트 랩)
- [x] DNF 처리

---

## Phase 5: 폴리싱 🚧

**현재 진행 중**

### 성능 최적화 ✅
- [x] Vector2 객체 재사용 (GC 부하 제거)
- [x] Color 배열 정적화
- [x] 미니맵 카메라 재사용
- [x] hudCamera.setToOrtho() 최적화
- [x] 맵 렌더링 범위 확장 (팝인 방지)

### 게임플레이 밸런싱 ✅
- [x] 최고 속도 조정 (3.5 → 4.0)
- [x] 가속 램프업 속도 조정 (0.10 → 0.03)
- [x] 타이어 마모율 완화
- [x] 브레이크 키 변경 (SPACE → SHIFT)
- [x] HUD 속도계 스케일 조정 (0.6배)

### 남은 작업
- [ ] 전체 플레이 테스트 (싱글 + 멀티)
- [ ] 버그 수정 및 안정화
- [ ] 오디오 시스템 (엔진 사운드, 효과음)
- [ ] 파티클 효과 (타이어 연기, 충돌 불꽃)
- [ ] 배포용 JAR 패키징 테스트

### 향후 확장 (선택)
- [ ] AI 상대 (싱글플레이용)
- [ ] 추가 트랙
- [ ] 차량 커스터마이징
- [ ] 리플레이 시스템

---

## 개발 원칙

1. **점진적 리팩토링**: 한 번에 하나의 Phase만 진행
2. **테스트 주도**: 각 기능 구현 후 즉시 수동 테스트
3. **문서화**: 주요 변경사항은 PROGRESS.md 및 CLAUDE.md 업데이트
4. **성능 우선**: 렌더 루프에서 객체 생성 최소화
5. **모듈화**: 기능별로 클래스 분리

---

## 빌드 명령어

```bash
# 게임 실행
gradlew lwjgl3:run

# 서버 실행
gradlew server:run

# 배포용 JAR 빌드
gradlew lwjgl3:dist

# 플랫폼별 JAR
gradlew lwjgl3:jarWin    # Windows
gradlew lwjgl3:jarMac    # macOS
gradlew lwjgl3:jarLinux  # Linux
```

---

**마지막 업데이트**: 2025-12-04
